# AGENTS.md

すべて日本語で返答してください。

本リポジトリでエージェント（LLM）が作業する際の共通ガイドラインです。GEMINI.md の方針を踏襲し、ソースコードを生成せず、Markdown ドキュメントのみを作成・更新するワークフローを定義します。

## 目的
- すべてのエージェントが同一ルールでドキュメントを作成し、品質と整合性を担保する。
- 要件定義・設計・タスクの3文書を中心に、変更時も一貫性を保つ。

## 成果物（ファイル名）
- 要件定義書: `requirements.md`
- 技術設計書: `design.md`
- 開発タスク: `tasks.md`

必要に応じて `docs/` ディレクトリ配下に配置してもよいが、ファイル名は上記に固定すること。

## ドキュメント作成ルール（GEMINI.md を踏襲）
1. 形式: すべて Markdown で作成する。
2. 出力: 変更がない場合でも、各ファイルは内容の全体を出力する。省略記法は使わない。
3. 整合性:
   - 要件定義・技術設計・開発タスクの間で常に整合性を保つ。
   - 特に、機能要件、技術スタック、MVP、優先順位、API仕様、画面定義等は全ドキュメントで一貫させる。
4. 指示の確認: 矛盾や不明点がある場合は、作業前に必ずユーザーへ確認する。
5. 完全性: 「(省略)」「(変更なし)」「(後略)」などの省略表現は使用せず、常にファイル全体を完全出力する。

## 作業フロー
1. 指示確認と前提整理（不明点は質問する）
2. MVP/スコープの明記（仮置きは明示）
3. `requirements.md` を作成
4. `design.md` を作成（要件と整合）
5. `tasks.md` を作成（優先度と受入基準を明確化）
6. 3文書の相互整合チェック（差分があれば再調整）
7. 全ファイルを完全出力

## 推奨セクション構成（雛形）

### requirements.md
- 背景・目的
- スコープ / 非スコープ
- ペルソナ・ユーザー
- 機能要件（優先度、MVPを含む）
- 非機能要件（性能・可用性・セキュリティ・運用）
- 依存関係・前提
- リスク・制約
- 成果物と受入基準（高レベル）

### design.md
- 全体アーキテクチャ
- 技術スタック（言語/フレームワーク/インフラ）
- データモデル / スキーマ
- API 仕様（エンドポイント、リクエスト/レスポンス、エラーハンドリング）
- 画面定義 / 画面遷移 / 状態管理
- セキュリティ設計（認証/認可、脅威と対策）
- 性能・スケーラビリティ設計（ボトルネック想定と対策）
- 運用・監視・ログ
- 移行/ロールアウト方針（必要時）

### tasks.md
- エピック / ユーザーストーリー（目的・期待価値）
- タスク一覧（粒度は開発者が実行可能な単位）
- 優先順位（MVP優先、依存関係の記載）
- 受入基準（DoD/具体的な確認観点）
- 見積り（相対ポイントまたは時間目安）
- リスク/ブロッカーと対策

## 整合性チェックリスト
- 要求⇔設計: すべての機能要件に対応する設計が存在する
- 設計⇔タスク: 設計上の各仕組みに対応するタスクがある
- 優先度: MVP対象は設計/タスクでも最優先になっている
- API/データ: エンティティ・フィールド名・型が3文書で一致
- 画面: 画面一覧と画面遷移が要件・設計・タスクで矛盾しない
- 用語: 用語/定義が文書間で統一されている

## 出力ポリシー
- 完全出力: 常にファイル全体を出力する
- 明瞭な見出し: 安定した見出し構造を用いる（差分比較を容易に）
- 言語: 日本語で作成（要求がない限り）
- 追記方針: 既存内容の修正が必要な場合は、関連する全ファイルを同一コミット内で更新することを推奨

## 禁止事項
- ソースコードの生成（本ガイドではドキュメントのみ）
- 省略表現の使用（「(省略)」など）
- 曖昧な記述（根拠・前提が不明な表現）
- 用語や仕様の無断変更（定義を変更する場合は全体反映）

## 不明点への対応
- 不明点は作業前に質問し、前提/仮定は明示する（例: 「仮: ○○」）
- ユーザー合意前提の選択肢がある場合は、利点/欠点と推奨案を併記する

## 変更管理（任意運用）
- 重要な仕様変更は、各ファイルの「更新履歴」節で記録してもよい
- バージョニングが必要な場合は、日付付きファイルやリリースタグで運用する

---
本ガイドラインは GEMINI.md の原則を汎用化したものであり、エージェント種別に依存せず適用できます。必要に応じてプロジェクト固有の追加ルールをこのファイルに追記してください。
