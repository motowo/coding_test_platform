# Claude Update Command

CLAUDE.md を更新するためのカスタムコマンドです。プロジェクトの開発ガイドラインを最新の状態に保ちます。

## 使用方法

```bash
# 基本的な更新
/claude-update

# 特定の項目のみ更新
/claude-update --section "Development Workflow"

# 新しいルールの追加
/claude-update --add "新しいルール内容"
```

## 機能

### 1. CLAUDE.md の自動更新
- 英語で記述された開発ガイドラインを更新
- コンテキスト圧縮を考慮した効率的な記述
- 既存内容との整合性確保

### 2. CLAUDE_ja.md の同期
- 日本語版ガイドラインとの自動同期
- 翻訳内容の一貫性維持
- **必須**: CLAUDE.md更新後は必ずCLAUDE_ja.mdも対応箇所を更新すること

### 3. 内容検証
- 更新前後の意味比較
- ルールの重複チェック
- 論理的整合性の確認

## 更新ルール

### コンテンツ圧縮原則
- **英語記述**: CLAUDE.md は英語のみでコンテキスト圧縮
- **日本語詳細**: CLAUDE_ja.md に日本語での詳細説明
- **必須事項**: Claude Code 実行時の日本語対応を明記

### 整理基準
- 重複する内容の統合
- 使用頻度の低いルールの簡素化
- 実行優先度に基づく並び替え

### 検証項目
- 既存ルールとの矛盾がないか
- 新しいルールが実行可能か
- 開発効率への影響評価

## 実行例

```bash
# カスタムコマンドの追加
/claude-update --add-command "新しいカスタムコマンドの説明"

# セクション別更新
/claude-update --section "Task Execution Constraints" --content "新しい制約ルール"

# 全体最適化
/claude-update --optimize "コンテキスト圧縮重視"
```

## 更新実行手順

CLAUDE.md更新時は以下の手順を必ず実行すること：

### 1. コンテキスト圧縮検討
更新前に以下を実施：
- 現在の文字数・行数を確認
- 重複表現や冗長な説明を特定
- 統合可能なセクションを検討
- 簡潔化可能な箇所を洗い出し

### 2. 圧縮実行
- セクション統合（関連する制約事項等）
- 重複削除（"Docker container only" 等の重複表現）
- 表現簡潔化（箇条書きの短縮、コード例の最小化）
- 約20-30%の文字数削減を目標

### 3. CLAUDE_ja.md 同期更新
- **CLAUDE.md の変更箇所特定**: 変更したセクションと内容を確認
- **CLAUDE_ja.md の対応箇所検索**: 同じセクション番号・項目を特定
- **日本語版への反映**: 変更内容を適切な日本語で同じ箇所に追加
- **整合性確認**: 英語版と日本語版の内容が一致していることを確認

## 注意事項

- 更新前に既存内容のバックアップを推奨
- 大幅な変更は段階的に実施
- チーム内での合意形成を重視
- 実際の開発フローとの整合性確認

## アップデート対象項目

1. **コア原則** - 基本的な実行方針
2. **実行ルール** - 即時実行 vs 確認必須の境界
3. **開発ワークフロー** - TDD サイクルとコミット規則
4. **品質基準** - コード品質とエラーハンドリング
5. **実行制約** - ツール別の制約事項
6. **完了報告** - 作業完了時の報告形式
7. **カスタムコマンド** - プロジェクト固有のコマンド定義