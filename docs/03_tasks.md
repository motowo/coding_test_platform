# 開発タスク

## 1. 開発マイルストーン

1.  **M1: MVP基盤構築 (Sprint 1-2)**
    *   開発環境、CI/CDパイプラインのセットアップ
    *   ユーザー認証・認可機能の実装
    *   主要なマイクロサービスの雛形作成
    *   テスト基盤整備（Unit/Integration/E2E）と最小カバレッジ基準（目安80%）の設定
2.  **M2: MVPコア機能開発 (Sprint 3-4)**
    *   問題管理（作成・編集・閲覧）機能の実装
    *   コード提出・自動採点機能の実装
    *   テスト結果の閲覧機能の実装
3.  **M3: アセスメント機能と追加機能 (Sprint 5~)**
    *   アセスメント機能の実装
    *   MVPリリースと改善
    *   ヒント機能、メール配信機能などの追加開発

## 2. タスク一覧 (バックログ)

### Epic: 環境構築 (M1)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-001 | プロジェクトリポジトリの作成 (Git) | P1 | ToDo | | #5 | 登録済 |
| T-002 | フロントエンド開発環境のセットアップ (Next.js) | P1 | ToDo | | #6 | 登録済 |
| T-003 | バックエンドサービス開発環境のセットアップ (Node.js) | P1 | ToDo | | #7 | 登録済 |
| T-004 | Dockerによるサンドボックス実行環境の構築 | P1 | ToDo | | #8 | 登録済 |
| T-005 | CI/CDパイプラインの初期設定 (GitHub Actions) | P2 | ToDo | | #9 | 登録済 |
| T-006 | API Gatewayのセットアップ | P2 | ToDo | | #10 | 登録済 |
| T-007 | **Docs**: 開発環境セットアップマニュアルの作成 | P1 | ToDo | | #11 | 登録済 |
| T-008 | 開発環境マニュアル: `docker-compose.yml` の作成と設定 | P1 | ToDo | | #12 | 登録済 |
| T-009 | 開発環境マニュアル: 必須ツール(Git, Docker, Node.js)のインストール手順 | P1 | ToDo | | #13 | 登録済 |
| T-010 | 開発環境マニュアル: `docker compose up`による全サービス起動手順 | P1 | ToDo | | #14 | 登録済 |
| T-011 | 開発環境マニュアル: DBマイグレーションと初期データ投入の手順 | P2 | ToDo | | #15 | 登録済 |
| T-016 | フロントエンド: CSS基盤導入 (Tailwind CSS) とテーマ設定 | P1 | ToDo | | #16 | 登録済 |
| T-017 | フロントエンド: UIアクセシビリティ基盤導入 (Radix UI) | P2 | ToDo | | #17 | 登録済 |
| T-018 | **Docs**: デザイントークン定義（色/間隔/角丸/影/タイポ）を設計書へ反映 | P1 | ToDo | | #18 | 登録済 |
| T-019 | Tailwind テーマにデザイントークンをマッピング（CSS変数参照） | P1 | ToDo | | #19 | 登録済 |
| T-028 | ライト/ダークテーマ切替の実装（`data-theme` 切替と永続化） | P2 | ToDo | | #20 | 登録済 |
| T-029 | UIプリミティブの作成（Button/Input/Card/Dialog）とトークン適用 | P1 | ToDo | | #21 | 登録済 |
| T-030 | **Testing**: TDD ガイドラインに沿ったテスト基盤（FE/BE）とスクリプト整備 | P1 | ToDo | | #22 | 登録済 |

### Epic: ユーザー管理機能 (M1)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-012 | Userサービス: DBスキーマ設計とマイグレーション（TDDで単体/結合テスト作成） | P1 | ToDo | | #23 | 登録済 |
| T-013 | Userサービス: ユーザー登録APIの実装（先に失敗テスト→最小実装→リファクタ） | P1 | ToDo | | #24 | 登録済 |
| T-014 | Userサービス: ログインAPIとJWT発行機能の実装（TDD、失敗ケース含む） | P1 | ToDo | | #25 | 登録済 |
| T-015 | フロントエンド: ログイン・新規登録画面の実装（Testing LibraryでUI振る舞いのTDD） | P2 | ToDo | | #26 | 登録済 |

### Epic: 問題管理機能 (M2)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-020 | **Backend**: `PROBLEMS`, `TEST_CASES` のDBスキーマ設計とマイグレーション更新 | P1 | ToDo | | #27 | 登録済 |
| T-021 | **Backend**: 問題作成API (`POST /api/v1/problems`) の実装 (バリデーション含む, TDD) | P1 | ToDo | | #28 | 登録済 |
| T-022 | **Backend**: 問題更新API (`PUT /api/v1/problems/:id`) の実装 | P1 | ToDo | | #29 | 登録済 |
| T-023 | **Backend**: 問題一覧・詳細取得API (`GET`) の実装 | P1 | ToDo | | #30 | 登録済 |
| T-024 | **Frontend**: 問題作成・編集ページのUI実装 | P1 | ToDo | | #31 | 登録済 |
| T-025 | **Backend**: `PROBLEMS`テーブルに想定解答時間カラムを追加するマイグレーション | P2 | ToDo | | #32 | 登録済 |
| T-026 | **Backend**: 問題作成・更新APIで想定解答時間を保存できるようにする | P2 | ToDo | | #33 | 登録済 |
| T-027 | **Frontend**: 問題作成画面に想定解答時間の入力フィールドを追加 | P2 | ToDo | | #34 | 登録済 |

### Epic: コード採点機能 (M2)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-035 | Submission/Scoringサービス: DBスキーマ設計 | P1 | ToDo | | #35 | 登録済 |
| T-031 | **Backend**: コード任意実行API (`POST /api/v1/execute`) の実装 | P1 | ToDo | | #36 | 登録済 |
| T-032 | **Backend**: コード提出API (`POST /api/v1/submissions`) の実装 | P1 | ToDo | | #37 | 登録済 |
| T-033 | Scoringサービス: 採点ロジックの実装 | P1 | ToDo | | #38 | 登録済 |
| T-034 | **Frontend**: テスト受験画面の3ペインレイアウト実装（UI/TDD＋主要フローのE2E） | P1 | ToDo | | #39 | 登録済 |

### Epic: アセスメント機能 (M3)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-050 | **Backend**: `ASSESSMENTS`, `ASSESSMENT_PROBLEMS`, `CANDIDATE_ASSESSMENTS` のDBスキーマ設計とマイグレーション | P1 | ToDo | | - | 未登録 |
| T-051 | **Backend**: `SUBMISSIONS` テーブルのスキーマ更新 (candidate_assessment_id追加) | P1 | ToDo | | - | 未登録 |
| T-052 | **Backend**: アセスメント管理用のCRUD API群 (`/api/v1/assessments`) の実装 | P1 | ToDo | | - | 未登録 |
| T-053 | **Backend**: 受験者へのアセスメント割当API (`/api/v1/candidate-assessments`) の実装 | P1 | ToDo | | - | 未登録 |
| T-054 | **Backend**: 受験者向けアセスメント取得API (`/api/v1/candidate-assessments/me`) の実装 | P1 | ToDo | | - | 未登録 |
| T-055 | **Frontend**: アセスメント作成・編集UIの実装（問題検索、順序変更含む） | P2 | ToDo | | - | 未登録 |
| T-056 | **Frontend**: 受験者ダッシュボード（自分に割り当てられたアセスメント一覧）UIの実装 | P2 | ToDo | | - | 未登録 |
| T-057 | **Frontend**: テスト受験画面に問題ナビゲーション機能を追加 | P1 | ToDo | | - | 未登録 |
| T-058 | **Frontend**: 結果確認画面でアセスメント単位でのスコア表示に対応 | P2 | ToDo | | - | 未登録 |
| T-059 | **Backend**: `ASSESSMENTS`テーブルに案内文カラムを追加するマイグレーション | P2 | ToDo | | - | 未登録 |
| T-060 | **Backend**: アセスメント作成・更新APIで案内文を保存できるようにする | P2 | ToDo | | - | 未登録 |
| T-061 | **Frontend**: アセスメント作成画面に案内文の入力エリアを追加 | P2 | ToDo | | - | 未登録 |
| T-062 | **Frontend**: 受験フローの開始前・終了後に案内文を表示する | P2 | ToDo | | - | 未登録 |

### Epic: 運用・保守（Docker/Compose）
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-100 | **Docs**: Docker/Compose 運用マニュアルの作成 | P2 | ToDo | | - | 未登録 |
| T-101 | 運用マニュアル: Compose 基本コマンド（起動/停止/ログ/スケール） | P2 | ToDo | | - | 未登録 |
| T-102 | 運用マニュアル: 環境変数/ボリューム/バックアップ（Postgres/Redis） | P2 | ToDo | | - | 未登録 |
| T-103 | 運用マニュアル: 監視/ログ集約の導入方針（将来） | P3 | ToDo | | - | 未登録 |
| T-104 | 運用マニュアル: トラブルシューティング（コンテナ起動不可/ポート衝突/ストレージ） | P2 | ToDo | | - | 未登録 |
| T-110 | **Docs**: シングルサーバー運用ガイド（ファイアウォール/バックアップ計画） | P3 | ToDo | | - | 未登録 |
| T-111 | 本番のみ外部マネージドDB/Redisへ切替する手順（オプション） | P3 | ToDo | | - | 未登録 |
| T-113 | デプロイ手順（Compose プロファイル/環境別 `.env` の運用） | P3 | ToDo | | - | 未登録 |

### Epic: リポジトリアウトメーション（Issues ラベリング）(M1)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-120 | ラベル `blocked` の作成（色: #d73a4a 推奨） | P1 | ToDo | | - | 未登録 |
| T-121 | 依存記法ルール定義と周知（CONTRIBUTING/Issueテンプレ追記） | P1 | ToDo | | - | 未登録 |
| T-122 | GitHub Actions ワークフロー雛形追加（issues-blocked-label.yml） | P1 | ToDo | | - | 未登録 |
| T-123 | 依存解析の実装（`Depends on:` と Issueリンクの両対応） | P1 | ToDo | | - | 未登録 |
| T-124 | イベント対応（opened/edited/closed/reopened/linked/unlinked/pr.closed） | P1 | ToDo | | - | 未登録 |
| T-125 | ラベル付与/解除の冪等処理とエラー処理 | P1 | ToDo | | - | 未登録 |
| T-126 | 手動再評価（`workflow_dispatch`）の追加 | P2 | ToDo | | - | 未登録 |
| T-127 | ドキュメント整備（`docs/09_issue_automation.md`、関連ガイド更新） | P1 | ToDo | | - | 未登録 |
| T-128 | 受入テスト（シナリオ: 単一/複数依存、リンクのみ、クロスレポ） | P1 | ToDo | | - | 未登録 |
| T-129 | 運用ポリシー反映（Developer Guide/PRチェックガイドへのリンク確認） | P2 | ToDo | | - | 未登録 |

### Epic: 開発者向け MCP 環境（ローカル限定）(M1)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-140 | **Docs**: MCP（Playwright/Serena）開発環境ガイドを追加 | P1 | ToDo | | - | 未登録 |
| T-141 | `docs/04_developer_guide.md` に MCP 開発運用を追記 | P1 | ToDo | | - | 登録済 |
| T-142 | CI/公開環境で MCP を無効化する方針を明記 | P1 | ToDo | | - | 未登録 |

### Epic: 問題自動生成機能 (Post-MVP)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-200 | **R&D**: 問題生成に適したLLM APIの調査と比較検討 | P3 | ToDo | | - | 未登録 |
| T-201 | **Backend**: LLMへのリクエストを構築するためのプロンプトテンプレート設計 | P3 | ToDo | | - | 未登録 |
| T-202 | **Backend**: 問題生成リクエストを受け付け、LLM APIを呼び出すサービスの実装 | P3 | ToDo | | - | 未登録 |
| T-203 | **Frontend**: 難易度と観点を入力し、問題生成をリクエストするUIの実装 | P3 | ToDo | | - | 未登録 |
| T-204 | **Frontend**: AIが生成した問題（問題文、コード、テストケース）をレビュー・承認する画面の実装 | P3 | ToDo | | - | 未登録 |

### Epic: 受験者データ分析機能 (Post-MVP)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-210 | **Backend**: パフォーマンス分析用のデータ集計バッチ、またはマテリアライズドビューの設計・実装 | P3 | ToDo | | - | 未登録 |
| T-211 | **Backend**: 受験者ごとの時系列パフォーマンスデータを返すAPIの実装 | P3 | ToDo | | - | 未登録 |
| T-212 | **Frontend**: 受験者詳細ページにパフォーマンス分析用のタブと画面レイアウトを実装 | P3 | ToDo | | - | 未登録 |
| T-213 | **Frontend**: スコア推移などを表示するグラフコンポーネント(Chart.js等)の導入と実装 | P3 | ToDo | | - | 未登録 |

### Epic: スキルマップ機能 (Post-MVP)
| ID | タスク | 優先度 | 状態 | Issue | 登録 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| T-220 | **Backend**: スキルマップ、スキルノードを管理するDBスキーマ設計とマイグレーション | P3 | ToDo | | - | 未登録 |
| T-221 | **Backend**: スキルマップ管理用のCRUD API実装 | P3 | ToDo | | - | 未登録 |
| T-222 | **Backend**: 問題とスキルノードを紐付けるAPI実装 | P3 | ToDo | | - | 未登録 |
| T-223 | **Backend**: アセスメント結果を元にスキル習熟度を更新するバッチまたは非同期サービスの実装 | P3 | ToDo | | - | 未登録 |
| T-224 | **Frontend**: 管理者向けスキルマップ作成・編集UIの実装 | P3 | ToDo | | - | 未登録 |
| T-225 | **Frontend**: スキルマップをインタラクティブに表示するダッシュボードUIの実装 | P3 | ToDo | | - | 未登録 |
