# 03: 実装（GREEN→REFACTOR）と小さなコミット

本章は、TDDで定義したREDをGREENにし、必要最小のリファクタを行いながら、小さな単位でコミットする手順です。

## 目的
- 最小実装でテストを通し、過剰実装を避ける
- 読みやすく変更容易な設計へ段階的に整える
- 履歴を小さく保ち、レビュー/ロールバック容易にする

## 完了条件（DoD）
- 該当REDがGREENになっている
- REFACTORで重複/命名/抽象度を整え、テストが常に緑
- 小さな完結単位でコミット（Conventional Commitsかつ `refs #<issue>` を付与）

## 手順
1) GREEN（最小実装）
- REDを通すために必要最小の変更のみ
- 仮実装/定数化での通過を避け、意味のある最小実装に留める

2) REFACTOR（常に緑）
- 重複の排除、命名/責務の明確化、パフォーマンスの小改善
- テストは常に緑のまま反復する

3) コミット運用
- 小さく頻繁にコミット（1コミット=1意図）
- メッセージ例: `feat(api): add problems create endpoint refs #27`
- 非関連ファイルの混在を避ける

## チェックリスト
- [ ] 最小実装でRED→GREENを達成
- [ ] REFACTORで設計の摩擦を軽減（常に緑）
- [ ] 小さく頻繁なコミット／`refs #<issue>` を付与

## よくある落とし穴
- REDを広げすぎてGREENに至らない → REDの粒度を再検討
- REFACTORで仕様変更を混ぜる → 仕様変更は別REDを起こし、境界を保つ
- 大きなコミット → レビュー/原因追跡が困難

## 関連リンク
- 開発者ガイド: 5.0/5.1（`docs/04_developer_guide.md`）
